<!DOCTYPE html>
<html>
<meta charset="UTF-8">    
<head>
<title>영화예매</title>
<link type="text/css" rel="stylesheet" href="moviebooking.css">
</head>
<body>
    <br>
    <div id="list">
        <h1><a href="main.html">영화의 전당</a></h1>
        <ul>
            <li><a href='selectmovie.html'>영화</a>
            <li><a href='moviebooking.html'>예매</a>
            <li><a href='theater.html'>극장안내</a>
            <li><a href='Event.html'>이벤트</a>
            <li><a href='CheckBooking.html'>예매확인</a>
        </ul>
        
    </div>
    
    <br/><br/>
    <div class="chat">
        <p class="text1">영화 선택</p>
        <table class="movie">
            <tr><td class="a" id="어벤져스 엔드게임" onclick="change_color1('어벤져스 엔드게임')">어벤져스 엔드게임</td></tr>
            <tr><td class="a" id="타이타닉" onclick="change_color1('타이타닉')">타이타닉</td></tr>
            <tr><td class="a" id="이터널스" onclick="change_color1('이터널스')">이터널스</td></tr>
            <tr><td class="a" id="러브레터" onclick="change_color1('러브레터')">러브레터</td></tr>
            <tr><td class="a" id="기생충" onclick="change_color1('기생충')">기생충</td></tr>
            <tr><td class="a" id="너의 이름은" onclick="change_color1('너의 이름은')">너의 이름은</td></tr>
        </table>
        <p class="text2">날짜 선택</p>
        
        <p class="title" id="title"> </p>
        <div class="d2" id="timetable">
            <a href="SelectSeat.html"><p class="mt1" id="m1" onclick="reserve('m1')"> </p></a>
            <a href="SelectSeat.html"><p class="mt2" id="m2" onclick="reserve('m2')"> </p></a>
            <a href="SelectSeat.html"><p class="mt3" id="m3" onclick="reserve('m3')"> </p></a>
            <a href="SelectSeat.html"><p class="mt4" id="m4" onclick="reserve('m4')"> </p></a>
        </div>

        <script type="text/javascript">
            var ls=window.localStorage;
            var today=new Date()
            var Year=today.getFullYear();
            var month = today.getMonth()+1;
            var movie=0;
            var date=0;
            var chart=["어벤져스 엔드게임","타이타닉","이터널스","러브레터","기생충","너의 이름은"];
            var count=[]  

            document.write("<table id='date'>") /*달력만들기*/
            document.write("<tr><th colspan='7'>"+Year+"-"+month+"</th><tr>"); /*날짜*/
            document.write("<tr><td></td>");
            for (i=1;i<7;i++)/*1~6*/
                document.write("<td id="+i+" onclick=color2("+i+")>"+i+"</td>"); /*2021년 11월 1~6일*/
            document.write("</tr>");
            for (i=7;i<14;i++)/*1~6*/
                document.write("<td id="+i+" onclick=color2("+i+")>"+i+"</td>"); /*2021년 11월 7~13일*/
            document.write("</tr>");
            for (i=14;i<21;i++)/*1~6*/
                document.write("<td id="+i+" onclick=color2("+i+")>"+i+"</td>"); /*2021년 11월 14~20일*/
            document.write("</tr>");
            for (i=21;i<28;i++)/*1~6*/
                document.write("<td id="+i+" onclick=color2("+i+")>"+i+"</td>"); /*2021년 11월 21~27일*/
            document.write("</tr>");

            document.write("<tr>")
            for (i=28;i<31;i++)/*28~30*/
                document.write("<td id="+i+" onclick=color2("+i+")> "+i+"</td>");/*28~30일*/
            document.write("<td> </td><td> </td><td> </td><td> </td></tr>");
            document.write("</table>");


            
            function change_color1(p){
                for (i=0;i<6;i++){
                    if (document.getElementById(chart[i]).style.background=="lightpink")
                        document.getElementById(chart[i]).style.background="cornsilk";
                }
                document.getElementById(p).style.background="lightpink";
                movie=p;
            }

            function color2(d){/*달력 칸색깔 바꾸기*/
                for (i=1;i<31;i++){
                    if (document.getElementById(i).style.background=="lightpink")
                        document.getElementById(i).style.background="cornsilk";
                }
                document.getElementById(d).style.background="lightpink";
                date=d;
                time(movie,date);
            }

            function time(x,d){ /*시간표 바꾸기*/
                title.style.visibility="visible";
                for (i=1;i<5;i++){
                    document.getElementById('m'+i).style.visibility="visible";
                }
                if (x=="어벤져스 엔드게임"){
                    title.innerHTML="어벤져스 엔드게임 11/"+d;
                    m1.innerHTML="09:00 - 11:15<br>32/100";
                    m2.innerHTML="12:00 - 14:15<br>70/100";
                    m3.innerHTML="15:00 - 17:15<br>80/100";
                    m4.innerHTML="19:00 - 21:15<br>50/100";
                }
                else if(x=="타이타닉"){
                    title.innerHTML="타이타닉 11/"+d;
                    m1.innerHTML="09:30 - 11:30<br>3/100";
                    m2.innerHTML="12:30 - 14:30<br>52/100";
                    m3.innerHTML="15:30 - 17:30<br>98/100";
                    m4.innerHTML="19:30 - 21:30<br>86/100";
                }
                else if(x=="이터널스"){
                    title.innerHTML="이터널스 11/"+d;
                    m1.innerHTML="09:15 - 11:40<br>32/100";
                    m2.innerHTML="12:10 - 14:35<br>53/100";
                    m3.innerHTML="15:20 - 17:45<br>19/100";
                    m4.innerHTML="19:20 - 21:35<br>17/100";
                }
                else if(x=="러브레터"){
                    title.innerHTML="러브레터 11/"+d
                    m1.innerHTML="10:00 - 12:00<br>32/100";
                    m2.innerHTML="13:00 - 15:00<br>56/100";
                    m3.innerHTML="16:00 - 18:00<br>36/100";
                    m4.innerHTML="22:00 - 24:00<br>87/100";
                }
                else if(x=="기생충"){
                    title.innerHTML="기생충 11/"+d
                    m1.innerHTML="10:30 - 12:35<br>46/100";
                    m2.innerHTML="13:40 - 15:45<br>7/100";
                    m3.innerHTML="17:00 - 19:05<br>65/100";
                    m4.innerHTML="20:10 - 22:15<br>10/100";
                }
                else{
                    title.innerHTML="너의 이름은 11/"+d
                    m1.innerHTML="09:00 - 11:15<br>5/100";
                    m2.innerHTML="12:00 - 14:15<br>10/100";
                    m3.innerHTML="15:00 - 17:15<br>15/100";
                    m4.innerHTML="19:00 - 21:15<br>6/100";
                }
            }
            
            function reserve(m){
                if(ls.getItem('key'))
                    ls.setItem('key',parseInt(ls.getItem('key'))+1);
                else
                    ls.setItem('key',0)            
                
                var avengers=["09:00","12:00","15:00","19:00"];
                var titanic=["09:30","12:30","1  5:30","19:30"];
                var etarnals=["09:15","12:10","15:20","19:20"];
                var loveletter=["10:00","13:00","16:00","22:00"];
                var parasite=["10:30","13:40","17:00","20:10"];
                var your_name=["09:00","12:00","15:00","19:00"];
                if (movie=="어벤져스 엔드게임")
                    ls.setItem(ls.getItem('key'), '어벤져스 엔드게임-11/'+date+'-'+avengers[m[1]-1]);
                else if(movie=="타이타닉")
                    ls.setItem(ls.getItem('key'), '타이타닉-11/'+date+'-'+titanic[m[1]-1]);
                else if(movie=="이터널스")
                    ls.setItem(ls.getItem('key'), '이터널스-11/'+date+'-'+etarnals[m[1]-1]);
                else if(movie=="러브레터")
                    ls.setItem(ls.getItem('key'), '러브레터-11/'+date+'-'+loveletter[m[1]-1]);
                else if(movie=="기생충")
                    ls.setItem(ls.getItem('key'), '기생충-11/'+date+'-'+parasite[m[1]-1]);
                else if(movie=="너의 이름은")
                    ls.setItem(ls.getItem('key'), '너의 이름은-11/'+date+'-'+your_name[m[1]-1]);   
            }
        </script>
    </div>

</body>
</html>